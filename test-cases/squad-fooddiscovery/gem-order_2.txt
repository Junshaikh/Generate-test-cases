@P0 @smoke

Feature: GEM Restaurant Ordering

  Background:
    Given User is logged in with a pro subscription
    And User is on the Talabat home screen

  Scenario: Access GEM restaurants from the home screen swim-lane
    When User scrolls and locates the "GEM Restaurants" swim-lane
    Then User should see a list of GEM restaurants
    And The GEM timer is running on the swim-lane
    When User taps on the "GEM Restaurants" swim-lane
    Then User navigates to the GEM restaurant collection screen
    And User should see a list of GEM restaurants

  Scenario: Access GEM restaurants from the Food vendors list as a Collection
    When User taps on the "Food" icon from the home screen
    Then User navigates to the food vendor list screen
    And User should see the "GEM" collection banner at the top
    When User taps on the "GEM" collection banner
    Then User navigates to the GEM restaurant collection screen
    And User should see a list of GEM restaurants

  Scenario: Verify GEM restaurant collection screen elements
    Given User is on the GEM restaurant collection screen
    Then User should see the GEM timer running
    And User should see options to sort by: "Recommended", "Rating", "Delivery Time"
    And User should see cuisine filter options

  Scenario: Filter GEM restaurants by cuisine
    Given User is on the GEM restaurant collection screen
    When User selects a specific cuisine filter, for example, "Italian"
    Then The list of GEM restaurants should be filtered to show only Italian cuisine restaurants

  Scenario: Sort GEM restaurants by rating
    Given User is on the GEM restaurant collection screen
    When User selects to sort by "Rating"
    Then The list of GEM restaurants should be sorted by rating in descending order

  Scenario: Select a GEM restaurant and view its menu
    Given User is on the GEM restaurant collection screen
    When User taps on a GEM restaurant card
    Then User navigates to the restaurant's menu page
    And User should see the GEM timer running on the menu page

  Scenario: Add items to the cart and reach the first GEM discount tier
    Given User is on a GEM restaurant's menu page
    When User adds items to the cart to reach the minimum order amount for the first GEM discount tier
    Then The GEM discount is displayed in the cart summary
    And User should see the GEM timer running on the cart screen

  Scenario: Add items to the cart and reach the third GEM discount tier
    Given User is on a GEM restaurant's menu page
    When User adds items to the cart to reach the minimum order amount for the third GEM discount tier
    Then The GEM discount is displayed in the cart summary with the maximum discount possible
    And User should see the GEM timer running on the cart screen

  Scenario: Verify GEM discount on the checkout screen
    Given User has items in the cart from a GEM restaurant that qualify for a GEM discount
    When User proceeds to checkout
    Then User should see the GEM discount applied in the payment summary
    And User should see the GEM timer running on the checkout screen

  Scenario: GEM discount is not applied if the minimum order amount is not reached
    Given User is on a GEM restaurant's menu page
    When User adds items to the cart but does not reach the minimum order amount for the GEM discount
    Then The GEM discount is not displayed in the cart summary
    And The GEM discount is not applied on the checkout screen

  Scenario: Place an order with a GEM discount
    Given User has items in the cart from a GEM restaurant that qualify for a GEM discount
    And User is on the checkout screen
    When User selects a payment method
    And User places the order
    Then The order confirmation should show the applied GEM discount

  Scenario: Verify GEM timer on multiple screens
    Given User has items in the cart from a GEM restaurant that qualify for a GEM discount
    When User navigates between the GEM restaurant menu, cart, and checkout screens
    Then The GEM timer is consistently displayed on each screen