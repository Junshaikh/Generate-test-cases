@P0 @smoke @regression

Feature: Order Grocery in Kuwait with kNet Payment

Background:
    Given This is for Talabat food delivery application
    And The Talabat mobile application is running
    And I am a logged-in user with a pro subscription
    And I am in Kuwait

Scenario: Order grocery with kNet successfully
    Given I tap on the "Groceries" entry point on the Home Screen
    And I search for a grocery store
    And I select a grocery store from the list
    And I add an item to the cart from the grocery catalog
    And I reach the minimum order amount
    And I tap on the "View Cart" button
    And I proceed to checkout
    Then I select kNet as the payment method
    And I complete the kNet payment process
    Then I should see a successful order confirmation message

Scenario: Order grocery with kNet and apply voucher
    Given I tap on the "Groceries" entry point on the Home Screen
    And I search for a grocery store
    And I select a grocery store from the list
    And I add an item to the cart from the grocery catalog
    And I reach the minimum order amount
    And I tap on the "View Cart" button
    And I enter a valid voucher code
    And I proceed to checkout
    Then I select kNet as the payment method
    And I complete the kNet payment process
    Then I should see a successful order confirmation message with the voucher discount applied

Scenario: Cancel kNet payment and retry
    Given I tap on the "Groceries" entry point on the Home Screen
    And I search for a grocery store
    And I select a grocery store from the list
    And I add an item to the cart from the grocery catalog
    And I reach the minimum order amount
    And I tap on the "View Cart" button
    And I proceed to checkout
    Then I select kNet as the payment method
    And I cancel the kNet payment
    Then I should be navigated back to the checkout page
    And I select kNet as the payment method again
    And I complete the kNet payment process
    Then I should see a successful order confirmation message

Scenario: Verify kNet is available as a payment option
    Given I tap on the "Groceries" entry point on the Home Screen
    And I search for a grocery store
    And I select a grocery store from the list
    And I add an item to the cart from the grocery catalog
    And I reach the minimum order amount
    And I tap on the "View Cart" button
    And I proceed to checkout
    Then I should see kNet as a payment option

Scenario: Order grocery with kNet and rider tip
    Given I tap on the "Groceries" entry point on the Home Screen
    And I search for a grocery store
    And I select a grocery store from the list
    And I add an item to the cart from the grocery catalog
    And I reach the minimum order amount
    And I tap on the "View Cart" button
    And I proceed to checkout
    And I add a rider tip
    Then I select kNet as the payment method
    And I complete the kNet payment process
    Then I should see a successful order confirmation message with the rider tip included